<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Conta - Loja Oficial do Flamengo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        .account-container { max-width: 1000px; margin: 40px auto; padding: 20px; }
        .account-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .account-header h1 { color: #e30613; }
        .btn-logout { background: #e30613; color: #fff; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; }
        .btn-logout:hover { background: #c1020f; }
        .account-tabs { display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #333; }
        .tab-btn { background: transparent; color: #ddd; border: none; padding: 12px 20px; cursor: pointer; border-bottom: 3px solid transparent; transition: all 0.3s; }
        .tab-btn.active { color: #e30613; border-bottom-color: #e30613; }
        .tab-btn:hover { color: #fff; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .form-section { background: #222; padding: 30px; border-radius: 8px; border: 1px solid #333; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; color: #fff; margin-bottom: 8px; font-weight: 600; }
        .form-group input { width: 100%; padding: 10px; border: 1px solid #444; background: #111; color: #fff; border-radius: 4px; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .btn-save { background: #e30613; color: #fff; border: none; padding: 12px 30px; border-radius: 4px; cursor: pointer; font-weight: 600; }
        .btn-save:hover { background: #c1020f; }
        .message { padding: 12px; border-radius: 4px; margin-bottom: 20px; }
        .message.success { background: #1a3a1a; color: #8fff8f; }
        .message.error { background: #3a1a1a; color: #ff8f8f; }
        .account-info { background: #111; padding: 20px; border-radius: 8px; border-left: 4px solid #e30613; margin-bottom: 20px; }
        .info-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #333; }
        .info-row:last-child { border-bottom: none; }
        .info-label { color: #bbb; }
        .info-value { color: #fff; font-weight: 600; }
        .no-data { text-align: center; color: #bbb; padding: 40px; }
        @media (max-width: 768px) {
            .form-row { grid-template-columns: 1fr; }
            .account-tabs { flex-wrap: wrap; }
        }
    </style>
</head>
<body>
    <header class="meli-header">
        <div class="header-top-bar">
            <div class="logo-container">
                <a href="index.html"><img src="imagens/logo1.jpg" alt="Flamengo Logo" class="meli-logo"></a>
            </div>
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Buscar camisas, acessórios e mais do Flamengo...">
                <button class="search-button"><i class="fas fa-search"></i></button>
            </div>
            <div class="header-right-items">
                <div class="header-icons">
                    <i class="fas fa-map-marker-alt"></i>
                    <span class="location-text">CEP</span>
                </div>
                <div class="cart-icon-container">
                    <i class="fas fa-shopping-cart"></i>
                    <span id="cartBadge" class="cart-badge" style="display:none;">0</span>
                </div>
            </div>
        </div>
        <nav class="header-bottom-nav">
            <div class="categories-container"><i class="fas fa-bars"></i><span>Camisas</span></div>
            <div class="main-nav">
                <a href="camisas-oficiais.html" class="nav-link">Camisas Oficiais</a>
                <a href="acessorios.html" class="nav-link">Acessórios</a>
                <a href="infantil.html" class="nav-link">Infantil</a>
                <a href="promocoes.html" class="nav-link">Promoções</a>
            </div>
            <div class="account-nav">
                <a href="account.html" class="nav-link">Minha conta</a>
                <a href="orders.html" class="nav-link">Pedidos</a>
                <a href="#" class="nav-link">Ajuda</a>
            </div>
        </nav>
    </header>

    <main class="account-container">
        <div class="account-header">
            <h1><i class="fas fa-user-circle"></i> Minha Conta</h1>
            <button class="btn-logout" onclick="logout()">Sair da Conta</button>
        </div>

        <div class="account-tabs">
            <button class="tab-btn active" onclick="switchTab('profile', this)"><i class="fas fa-user"></i> Perfil</button>
            <button class="tab-btn" onclick="switchTab('address', this)"><i class="fas fa-map-marker-alt"></i> Endereços</button>
            <button class="tab-btn" onclick="switchTab('preferences', this)"><i class="fas fa-cog"></i> Preferências</button>
        </div>

        <!-- ABA: PERFIL -->
        <div id="profile" class="tab-content active">
            <div class="form-section">
                <div id="profileMessage"></div>
                <h2 style="color: #e30613; margin-bottom: 20px;">Dados Pessoais</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Nome Completo *</label>
                        <input type="text" id="fullName" placeholder="Seu nome completo">
                    </div>
                    <div class="form-group">
                        <label>Email *</label>
                        <input type="email" id="email" placeholder="seu@email.com">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Telefone</label>
                        <input type="tel" id="phone" placeholder="(11) 98765-4321">
                    </div>
                    <div class="form-group">
                        <label>Data de Nascimento</label>
                        <input type="date" id="birthDate">
                    </div>
                </div>

                <div class="form-group">
                    <label>CPF</label>
                    <input type="text" id="cpf" placeholder="123.456.789-00" maxlength="14">
                </div>

                <button class="btn-save" onclick="saveProfile()">Salvar Dados Pessoais</button>
            </div>
        </div>

        <!-- ABA: ENDEREÇOS -->
        <div id="address" class="tab-content">
            <div class="form-section">
                <div id="addressMessage"></div>
                <h2 style="color: #e30613; margin-bottom: 20px;">Endereço Principal</h2>
                
                <div class="form-group">
                    <label>CEP *</label>
                    <input type="text" id="cep" placeholder="12345-678" maxlength="9">
                </div>

                <div class="form-group">
                    <label>Endereço *</label>
                    <input type="text" id="address" placeholder="Rua, Avenida, etc">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Número *</label>
                        <input type="text" id="number" placeholder="123">
                    </div>
                    <div class="form-group">
                        <label>Complemento</label>
                        <input type="text" id="complement" placeholder="Apto 456">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Cidade *</label>
                        <input type="text" id="city" placeholder="Sua cidade">
                    </div>
                    <div class="form-group">
                        <label>Estado *</label>
                        <select id="state">
                            <option value="">Selecione...</option>
                            <option value="SP">São Paulo</option>
                            <option value="RJ">Rio de Janeiro</option>
                            <option value="MG">Minas Gerais</option>
                            <option value="BA">Bahia</option>
                            <option value="SC">Santa Catarina</option>
                            <option value="RS">Rio Grande do Sul</option>
                            <option value="DF">Distrito Federal</option>
                            <option value="GO">Goiás</option>
                            <option value="PA">Pará</option>
                            <option value="CE">Ceará</option>
                        </select>
                    </div>
                </div>

                <button class="btn-save" onclick="saveAddress()">Salvar Endereço</button>
            </div>
        </div>

        <!-- ABA: PREFERÊNCIAS -->
        <div id="preferences" class="tab-content">
            <div class="form-section">
                <div id="preferencesMessage"></div>
                <h2 style="color: #e30613; margin-bottom: 20px;">Preferências</h2>
                
                <div class="form-group">
                    <label style="display: flex; align-items: center; cursor: pointer;">
                        <input type="checkbox" id="newsletter" style="margin-right: 10px;">
                        Desejo receber ofertas e promoções por email
                    </label>
                </div>

                <div class="form-group">
                    <label style="display: flex; align-items: center; cursor: pointer;">
                        <input type="checkbox" id="sms" style="margin-right: 10px;">
                        Desejo receber notificações por SMS
                    </label>
                </div>

                <div class="form-group">
                    <label style="display: flex; align-items: center; cursor: pointer;">
                        <input type="checkbox" id="notifications" style="margin-right: 10px;">
                        Desejo receber notificações de status dos pedidos
                    </label>
                </div>

                <h3 style="color: #e30613; margin-top: 30px; margin-bottom: 20px;">Segurança</h3>

                <div class="form-group">
                    <label>Alterar Senha</label>
                    <input type="password" id="newPassword" placeholder="Digite uma nova senha">
                </div>

                <button class="btn-save" onclick="savePreferences()">Salvar Preferências</button>
            </div>
        </div>
    </main>

    <footer class="site-footer">
        <div class="footer-bottom">
            <p>© <span id="year"></span> Clube de Regatas do Flamengo — Loja Oficial. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script src="cart.js"></script>
    <script src="imgFallback.js"></script>
    <script src="search.js"></script>
    <script>
        document.getElementById('year').textContent = new Date().getFullYear();

        const userKey = 'flamengoDJUser';

        // Carregar dados ao abrir página
        window.addEventListener('load', function() {
            loadUserData();
        });

        function switchTab(tab, btn) {
            // Ocultar todas as abas
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            
            // Mostrar aba selecionada
            document.getElementById(tab).classList.add('active');
            if (btn) btn.classList.add('active');
        }

        function loadUserData() {
            const user = JSON.parse(localStorage.getItem(userKey) || '{}');
            
            // Carregar perfil
            document.getElementById('fullName').value = user.fullName || '';
            document.getElementById('email').value = user.email || '';
            document.getElementById('phone').value = user.phone || '';
            document.getElementById('birthDate').value = user.birthDate || '';
            document.getElementById('cpf').value = user.cpf || '';

            // Carregar endereço
            document.getElementById('cep').value = user.address?.cep || '';
            document.getElementById('address').value = user.address?.address || '';
            document.getElementById('number').value = user.address?.number || '';
            document.getElementById('complement').value = user.address?.complement || '';
            document.getElementById('city').value = user.address?.city || '';
            document.getElementById('state').value = user.address?.state || '';

            // Carregar preferências
            document.getElementById('newsletter').checked = user.preferences?.newsletter || false;
            document.getElementById('sms').checked = user.preferences?.sms || false;
            document.getElementById('notifications').checked = user.preferences?.notifications || false;
        }

        function saveProfile() {
            const user = JSON.parse(localStorage.getItem(userKey) || '{}');
            
            user.fullName = document.getElementById('fullName').value;
            user.email = document.getElementById('email').value;
            user.phone = document.getElementById('phone').value;
            user.birthDate = document.getElementById('birthDate').value;
            user.cpf = document.getElementById('cpf').value;

            localStorage.setItem(userKey, JSON.stringify(user));
            showMessage('profileMessage', 'Dados pessoais salvos com sucesso!', 'success');
        }

        function saveAddress() {
            const user = JSON.parse(localStorage.getItem(userKey) || '{}');
            
            user.address = {
                cep: document.getElementById('cep').value,
                address: document.getElementById('address').value,
                number: document.getElementById('number').value,
                complement: document.getElementById('complement').value,
                city: document.getElementById('city').value,
                state: document.getElementById('state').value
            };

            localStorage.setItem(userKey, JSON.stringify(user));
            showMessage('addressMessage', 'Endereço salvo com sucesso!', 'success');
        }

        function savePreferences() {
            const user = JSON.parse(localStorage.getItem(userKey) || '{}');
            
            user.preferences = {
                newsletter: document.getElementById('newsletter').checked,
                sms: document.getElementById('sms').checked,
                notifications: document.getElementById('notifications').checked
            };

            if (document.getElementById('newPassword').value) {
                user.password = btoa(document.getElementById('newPassword').value);
                document.getElementById('newPassword').value = '';
            }

            localStorage.setItem(userKey, JSON.stringify(user));
            showMessage('preferencesMessage', 'Preferências salvas com sucesso!', 'success');
        }

        function showMessage(elementId, text, type) {
            const el = document.getElementById(elementId);
            el.innerHTML = `<div class="message ${type}">${text}</div>`;
            setTimeout(() => { el.innerHTML = ''; }, 3000);
        }

        function logout() {
            localStorage.removeItem(userKey);
            alert('Você foi desconectado');
            window.location.href = 'index.html';
        }

        document.querySelector('.cart-icon-container')?.addEventListener('click', () => {
            window.location.href = 'checkout.html';
        });
    </script>
</body>
</html>
