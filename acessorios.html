<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acessórios - Loja Oficial do Flamengo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        .category-page {
            max-width: 1300px;
            margin: 40px auto;
            padding: 20px;
        }
        .category-header {
            margin-bottom: 30px;
        }
        .category-header h1 {
            color: #e30613;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        .category-header p {
            color: #ddd;
            font-size: 1.1rem;
        }
        .products-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 30px;
        }
        .product-card-category {
            background: #222;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #333;
            cursor: pointer;
            transition: all 0.3s;
        }
        .product-card-category:hover {
            border-color: #e30613;
            transform: translateY(-5px);
        }
        .product-card-category img {
            width: 100%;
            height: 250px;
            object-fit: contain;
            background: #111;
            padding: 10px;
        }
        .product-card-info {
            padding: 15px;
        }
        .product-card-info h3 {
            color: #fff;
            margin: 0 0 8px;
            font-size: 1rem;
        }
        .product-card-info p {
            color: #ddd;
            margin: 0 0 10px;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        .product-card-price {
            color: #e30613;
            font-weight: bold;
            font-size: 1.3rem;
            margin-bottom: 10px;
        }
        .btn-view {
            width: 100%;
            padding: 8px;
            background: #e30613;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }
        .btn-view:hover {
            background: #c1020f;
        }
        @media (max-width: 1024px) {
            .products-grid { grid-template-columns: repeat(3, 1fr); }
        }
        @media (max-width: 768px) {
            .products-grid { grid-template-columns: repeat(2, 1fr); }
            .category-header h1 { font-size: 1.8rem; }
        }
        @media (max-width: 480px) {
            .products-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <header class="meli-header">
        <div class="header-top-bar">
            <div class="logo-container">
                <a href="index.html">
                    <img src="imagens/logo1.jpg" alt="Flamengo Logo" class="meli-logo">
                </a>
            </div>
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Buscar camisas, acessórios e mais do Flamengo...">
                <button class="search-button">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            <div class="header-right-items">
                <div class="header-icons">
                    <i class="fas fa-map-marker-alt"></i>
                    <span class="location-text">CEP</span>
                </div>
                <div class="cart-icon-container">
                    <i class="fas fa-shopping-cart"></i>
                    <span id="cartBadge" class="cart-badge" style="display:none;">0</span>
                </div>
            </div>
        </div>
        <nav class="header-bottom-nav">
            <div class="categories-container">
                <i class="fas fa-bars"></i>
                <span>Categorias</span>
            </div>
            <div class="main-nav">
                <a href="camisas-oficiais.html" class="nav-link">Camisas Oficiais</a>
                <a href="acessorios.html" class="nav-link">Acessórios</a>
                <a href="infantil.html" class="nav-link">Infantil</a>
                <a href="promocoes.html" class="nav-link">Promoções</a>
            </div>
            <div class="account-nav">
                <a href="account.html" class="nav-link">Minha conta</a>
                <a href="orders.html" class="nav-link">Pedidos</a>
                <a href="#" class="nav-link">Ajuda</a>
            </div>
        </nav>
    </header>

    <main class="store-main">
        <div class="category-page">
            <div class="category-header">
                <h1>Acessórios Flamengo</h1>
                <p>Complemente seu look de torcedor com os acessórios oficiais do Flamengo</p>
            </div>

            <div class="products-grid" id="productsGrid">
                <!-- Produtos serão carregados aqui -->
            </div>
        </div>
    </main>

    <!-- Modal de Detalhe do Produto -->
    <div id="productModal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <button class="modal-close" onclick="closeProductModal()">&times;</button>
            <div class="modal-body">
                <div class="modal-image">
                    <img id="modalProductImage" src="" alt="Produto" />
                </div>
                <div class="modal-info">
                    <h2 id="modalProductTitle">Produto</h2>
                    <p id="modalProductDescription" class="product-desc"></p>
                    <div class="product-price-section">
                        <span class="product-label">Preço:</span>
                        <span id="modalProductPrice" class="product-price">R$ 0,00</span>
                    </div>
                    <div class="product-sizes" id="modalProductSizes">
                        <!-- Tamanhos dinâmicos -->
                    </div>
                    <div class="product-colors" id="modalProductColors">
                        <!-- Cores dinâmicas -->
                    </div>
                    <div class="modal-actions">
                        <input type="number" id="modalProductQty" min="1" value="1" class="qty-input" placeholder="Qtd" />
                        <button class="btn-add-cart" onclick="addToCart()">Adicionar ao carrinho</button>
                    </div>
                    <div class="modal-shipping">
                        <p><i class="fas fa-truck"></i> Frete grátis acima de R$ 200</p>
                        <p><i class="fas fa-check-circle"></i> Garantia oficial Flamengo</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="site-footer">
        <div class="footer-bottom">
            <p>© <span id="year"></span> Clube de Regatas do Flamengo — Loja Oficial. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script src="cart.js"></script>
    <script src="imgFallback.js"></script>
    <script>
        // Dados de acessórios
        const accessories = [
            { name: 'Boné Flamengo Oficial', price: 59.90, image: 'imagens/boneFla.jpg', description: 'Boné oficial bordado', sizes: ['Único'], colors: ['Preto', 'Vermelho'] },
            { name: 'Lenço Flamengo Premium', price: 39.90, image: 'imagens/lençoFla.jpg', description: 'Lenço em algodão premium', sizes: ['Único'], colors: ['Vermelho'] },
            { name: 'Meia Flamengo Pack 3', price: 49.90, image: 'imagens/meiaFLa.jpg', description: 'Pacote com 3 pares', sizes: ['P', 'M', 'G'], colors: ['Vermelho'] },
            { name: 'Chaveiro Flamengo Metal', price: 19.90, image: 'imagens/chaveirofla.jpg', description: 'Chaveiro em metal cromado', sizes: ['Único'], colors: ['Prata'] },
            { name: 'Bandeira Flamengo 1,5m', price: 34.90, image: 'imagens/bandeirafla.jpg', description: 'Bandeira oficial para eventos', sizes: ['Único'], colors: ['Vermelho e Preto'] },
            { name: 'Relógio Flamengo', price: 89.90, image: 'imagens/relogio.jpg', description: 'Relógio digital esportivo', sizes: ['Único'], colors: ['Preto'] },
            { name: 'Mochila Flamengo Escolar', price: 99.90, image: 'imagens/mochila.jpg', description: 'Mochila reforçada com logo 3D', sizes: ['Único'], colors: ['Vermelho'] },
            { name: 'Pulseira Flamengo Silicone', price: 14.90, image: 'imagens/pulseira.jpg', description: 'Pulseira em silicone resistente', sizes: ['P', 'M', 'G'], colors: ['Vermelho'] }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            const year = document.getElementById('year');
            if (year) year.textContent = new Date().getFullYear();

            // Carregar produtos
            loadProducts();
            cart.updateCartBadge();
        });

        function loadProducts() {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = accessories.map((item, idx) => `
                <div class="product-card-category" onclick="openModal(${idx})">
                    <img src="${item.image}" alt="${item.name}" />
                    <div class="product-card-info">
                        <h3>${item.name}</h3>
                        <p>${item.description}</p>
                        <div class="product-card-price">R$ ${item.price.toFixed(2).replace('.', ',')}</div>
                        <button class="btn-view" onclick="event.stopPropagation(); openModal(${idx})">Ver Detalhes</button>
                    </div>
                </div>
            `).join('');
        }

        function openModal(index) {
            const item = accessories[index];
            const modal = document.getElementById('productModal');
            document.getElementById('modalProductTitle').textContent = item.name;
            document.getElementById('modalProductDescription').textContent = item.description;
            document.getElementById('modalProductImage').src = item.image;
            document.getElementById('modalProductPrice').textContent = `R$ ${item.price.toFixed(2).replace('.', ',')}`;
            
            const sizesDiv = document.getElementById('modalProductSizes');
            sizesDiv.innerHTML = item.sizes[0] !== 'Único' ? `<label>Tamanho:</label><div class="size-options">${item.sizes.map(s => `<button class="size-btn" onclick="selectSize(this)">${s}</button>`).join('')}</div>` : '';
            
            const colorsDiv = document.getElementById('modalProductColors');
            colorsDiv.innerHTML = `<label>Cor:</label><div class="color-options">${item.colors.map(c => `<button class="color-btn" onclick="selectColor(this)">${c}</button>`).join('')}</div>`;
            
            document.querySelector('.size-btn')?.classList.add('active');
            document.querySelector('.color-btn')?.classList.add('active');
            
            modal.dataset.productName = item.name;
            modal.dataset.productPrice = item.price;
            
            modal.style.display = 'flex';
        }

        function closeProductModal() {
            document.getElementById('productModal').style.display = 'none';
        }

        function selectSize(btn) {
            document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function selectColor(btn) {
            document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function addToCart() {
            const modal = document.getElementById('productModal');
            const title = document.getElementById('modalProductTitle').textContent;
            const price = parseFloat(modal.dataset.productPrice);
            const qty = parseInt(document.getElementById('modalProductQty').value) || 1;
            const size = document.querySelector('.size-btn.active')?.textContent || 'Único';
            const color = document.querySelector('.color-btn.active')?.textContent || '';

            if (typeof cart !== 'undefined') {
                cart.addItem({
                    name: title,
                    price: price,
                    quantity: qty,
                    size: size,
                    color: color,
                    image: document.getElementById('modalProductImage').src
                });
                alert(`${qty}x ${title} adicionado ao carrinho!`);
            }
            
            closeProductModal();
        }

        document.addEventListener('click', function(e) {
            const modal = document.getElementById('productModal');
            if (modal && e.target === modal) closeProductModal();
        });
        
        // Redirecionar para checkout ao clicar no carrinho
        document.querySelector('.cart-icon-container')?.addEventListener('click', function() {
            window.location.href = 'checkout.html';
        });
    </script>
</body>
</html>
